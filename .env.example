# ============================================
# Smart Forecast - Environment Configuration
# ============================================
# Copy this file to .env before running docker compose
#
# Lưu ý: Đây là file cấu hình cho Docker Compose
# Các file .env khác:
#   - backend/.env       : Cấu hình NestJS backend
#   - mobile/.env        : Cấu hình Expo mobile app
#   - web/.env.local     : Cấu hình Next.js web
# ============================================

# ====== Docker Compose ======
COMPOSE_PROJECT_NAME=smartforecast

# ============================================
# DATABASE CONFIGURATION
# ============================================

# ------ PostgreSQL Database ------
# Lưu trữ dữ liệu lịch sử và dữ liệu ứng dụng
POSTGRES_USER=admin
POSTGRES_PASSWORD=changeme_in_production
POSTGRES_DB=smart_forecast_db

# ------ MongoDB (for Orion-LD) ------
# Lưu trữ context data cho FIWARE Orion-LD
MONGO_INITDB_ROOT_USERNAME=admin
MONGO_INITDB_ROOT_PASSWORD=changeme_in_production

# ============================================
# STORAGE CONFIGURATION
# ============================================

# ------ MinIO Object Storage ------
# Lưu trữ file, ảnh sự cố (S3-compatible)
# API: http://localhost:8002 (mapped from internal 9000)
# Console: http://localhost:8003 (mapped from internal 9001)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=changeme_in_production
MINIO_BUCKET_NAME=incidents

# ============================================
# FIWARE CONFIGURATION
# ============================================

# ------ Orion-LD Context Broker ------
# Quản lý context data theo chuẩn NGSI-LD
# Internal only - not exposed externally
# Log levels: DEBUG, INFO, WARN, ERROR
ORION_LOG_LEVEL=DEBUG
ORION_LD_TENANT=

# ============================================
# BACKEND CONFIGURATION
# ============================================

# ------ CORS Configuration ------
# Additional CORS origins (comma-separated)
# Example: http://192.168.1.100:8001,https://your-domain.com
CORS_ORIGINS=

# ------ JWT Authentication ------
JWT_SECRET=your_very_secure_jwt_secret_key_change_this_in_production
JWT_EXPIRATION=7d

# ------ External APIs ------
OPENWEATHERMAP_API_KEY=your_openweathermap_api_key_here

# ------ Firebase Cloud Messaging (Optional) ------
FIREBASE_PROJECT_ID=
FIREBASE_PRIVATE_KEY=
FIREBASE_CLIENT_EMAIL=

# ------ Google OAuth 2.0 (for Mobile) ------
GOOGLE_CLIENT_ID=

# ------ Alert Configuration ------
ALERT_BUFFER_KM=1

# ============================================
# WEB FRONTEND CONFIGURATION
# ============================================

# ------ API URLs for Web Frontend ------
# Replace YOUR_SERVER_IP with actual server IP/domain for production
NEXT_PUBLIC_API_URL=http://localhost:8000/api/v1
NEXT_PUBLIC_MINIO_URL=http://localhost:8002

# ============================================
# PORT MAPPING (for reference)
# ============================================
# Service        | Internal | External | Purpose
# ---------------|----------|----------|------------------
# backend        | 8000     | 8000     | API server
# web            | 3000     | 8001     | Frontend
# minio API      | 9000     | 8002     | Object storage
# minio console  | 9001     | 8003     | Storage admin UI
# postgres       | 5432     | -        | Internal only
# mongodb        | 27017    | -        | Internal only
# orion          | 1026     | -        | Internal only
# ============================================

# ============================================
# NOTES
# ============================================
# 
# QUAN TRỌNG: Thay đổi tất cả passwords trước khi deploy production!
#
# Xem thêm hướng dẫn cấu hình chi tiết:
#    - backend/.env.example  : API keys, JWT, Firebase
#    - mobile/.env.example   : Google OAuth, API URL
#    - docs-site/docs/env.md : Tài liệu đầy đủ
#
# Quick Start:
#    cp .env.example .env
#    docker compose up -d
# ============================================
